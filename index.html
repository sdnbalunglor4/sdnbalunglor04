<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Website Sekolah Dasar</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        .smooth-scroll {
            scroll-behavior: smooth;
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .hero-pattern {
            background-image: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%),
                linear-gradient(225deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%);
            background-size: 40px 40px;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="smooth-scroll"><!-- Login Modal -->
  <div id="login-modal" class="modal">
   <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4">
    <h2 class="text-2xl font-bold mb-6 text-center">Login Admin</h2>
    <form id="login-form" class="space-y-4">
     <div><label for="username" class="block font-medium mb-2">Username</label> <input type="text" id="username" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
     </div>
     <div><label for="password" class="block font-medium mb-2">Password</label> <input type="password" id="password" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
     </div>
     <div id="login-error" class="hidden text-red-600 text-sm"></div><button type="submit" class="w-full py-3 rounded-lg font-semibold text-white"> <span id="login-btn-text">Login</span> </button> <button type="button" id="cancel-login" class="w-full py-3 rounded-lg font-semibold border-2">Batal</button>
    </form>
   </div>
  </div><!-- Admin Dashboard Modal -->
  <div id="admin-modal" class="modal">
   <div class="bg-white rounded-xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90%] overflow-hidden flex flex-col">
    <div class="p-6 border-b flex justify-between items-center">
     <h2 class="text-2xl font-bold">Dashboard Admin</h2><button id="close-admin" class="text-2xl font-bold hover:opacity-70">×</button>
    </div>
    <div class="flex-1 overflow-y-auto p-6">
     <div class="mb-6"><button id="add-content-btn" class="px-6 py-3 rounded-lg font-semibold text-white">+ Tambah Konten Baru</button>
     </div>
     <div id="content-list" class="space-y-4"></div>
    </div>
   </div>
  </div><!-- Add/Edit Content Modal -->
  <div id="content-modal" class="modal">
   <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90%] overflow-hidden flex flex-col">
    <div class="p-6 border-b flex justify-between items-center">
     <h2 id="content-modal-title" class="text-2xl font-bold">Tambah Konten</h2><button id="close-content-modal" class="text-2xl font-bold hover:opacity-70">×</button>
    </div>
    <div class="flex-1 overflow-y-auto p-6">
     <form id="content-form" class="space-y-4"><input type="hidden" id="edit-content-id">
      <div><label for="content-type" class="block font-medium mb-2">Tipe Konten</label> <select id="content-type" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2"> <option value="program">Program Unggulan</option> <option value="info">Informasi Umum</option> <option value="announcement">Pengumuman</option> <option value="achievement">Prestasi</option> </select>
      </div>
      <div><label for="content-title" class="block font-medium mb-2">Judul</label> <input type="text" id="content-title" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
      </div>
      <div><label for="content-text" class="block font-medium mb-2">Konten</label> <textarea id="content-text" rows="6" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2"></textarea>
      </div>
      <div><label for="content-order" class="block font-medium mb-2">Urutan Tampil</label> <input type="number" id="content-order" value="1" min="1" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
      </div>
      <div class="flex items-center space-x-2"><input type="checkbox" id="content-visible" checked class="w-5 h-5"> <label for="content-visible" class="font-medium">Tampilkan di website</label>
      </div>
      <div class="flex gap-4"><button type="submit" id="save-content-btn" class="flex-1 py-3 rounded-lg font-semibold text-white"> <span id="save-btn-text">Simpan</span> </button> <button type="button" id="cancel-content" class="flex-1 py-3 rounded-lg font-semibold border-2">Batal</button>
      </div>
     </form>
    </div>
   </div>
  </div><!-- Main Website -->
  <div class="min-h-full flex flex-col"><!-- Navigation -->
   <nav id="navbar" class="shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 py-4">
     <div class="flex justify-between items-center">
      <div class="flex items-center space-x-3">
       <svg class="w-10 h-10" viewbox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="50" height="50" rx="10" id="logo-bg" /> <path d="M15 20h20M15 25h20M15 30h15" stroke="white" stroke-width="2.5" stroke-linecap="round" /> <circle cx="25" cy="12" r="3" fill="white" />
       </svg>
       <div>
        <h1 id="school-name" class="text-xl font-bold">SD Negeri 1 Jakarta</h1>
        <p id="school-motto" class="text-sm">Cerdas, Berkarakter, Berprestasi</p>
       </div>
      </div>
      <div class="flex items-center space-x-4">
       <div class="hidden md:flex space-x-6"><a href="#home" class="nav-link font-medium">Beranda</a> <a href="#programs" class="nav-link font-medium">Program</a> <a href="#contact" class="nav-link font-medium">Kontak</a>
       </div><button id="admin-login-btn" class="px-4 py-2 rounded-lg font-semibold text-sm">Admin</button>
      </div>
     </div>
    </div>
   </nav><!-- Hero Section -->
   <section id="home" class="hero-pattern py-20 md:py-32">
    <div class="max-w-7xl mx-auto px-6 text-center">
     <div class="mb-6">
      <svg class="w-20 h-20 mx-auto mb-6" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="45" id="hero-icon-bg" opacity="0.2" /> <path d="M50 20L65 35H55V60H45V35H35L50 20Z" id="hero-icon-fg" /> <rect x="30" y="65" width="40" height="15" rx="2" id="hero-icon-fg2" />
      </svg>
     </div>
     <h2 id="hero-title" class="text-4xl md:text-6xl font-bold mb-4">Selamat Datang di</h2>
     <h3 id="hero-school-name" class="text-3xl md:text-5xl font-bold mb-6">SD Negeri 1 Jakarta</h3>
     <p id="hero-subtitle" class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Membentuk Generasi Cerdas dan Berkarakter</p>
     <div class="flex flex-wrap justify-center gap-4"><a href="#programs" id="cta-primary" class="px-8 py-3 rounded-lg font-semibold text-white transition-all">Lihat Program</a> <a href="#contact" id="cta-secondary" class="px-8 py-3 rounded-lg font-semibold transition-all">Hubungi Kami</a>
     </div>
    </div>
   </section><!-- Dynamic Content Section -->
   <section id="programs" class="py-20">
    <div class="max-w-7xl mx-auto px-6">
     <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Program &amp; Informasi</h2>
     <div id="dynamic-content" class="grid md:grid-cols-3 gap-8"></div>
     <div id="empty-state" class="text-center py-12 hidden">
      <svg class="w-24 h-24 mx-auto mb-4 opacity-30" viewbox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="3" /> <path d="M50 30v40M30 50h40" stroke="currentColor" stroke-width="3" stroke-linecap="round" />
      </svg>
      <p class="text-xl opacity-60">Belum ada konten. Login sebagai admin untuk menambahkan.</p>
     </div>
    </div>
   </section><!-- Contact Section -->
   <section id="contact" class="py-20">
    <div class="max-w-7xl mx-auto px-6">
     <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Hubungi Kami</h2>
     <div class="grid md:grid-cols-2 gap-12">
      <div class="space-y-6">
       <div class="flex items-start space-x-4">
        <div id="contact-icon1" class="p-3 rounded-lg">
         <svg class="w-6 h-6" fill="white" viewbox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
         </svg>
        </div>
        <div>
         <h3 class="font-bold mb-1">Alamat</h3>
         <p id="contact-address">Jl. Pendidikan No. 123, Jakarta Selatan, DKI Jakarta 12345</p>
        </div>
       </div>
       <div class="flex items-start space-x-4">
        <div id="contact-icon2" class="p-3 rounded-lg">
         <svg class="w-6 h-6" fill="white" viewbox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
         </svg>
        </div>
        <div>
         <h3 class="font-bold mb-1">Telepon</h3>
         <p id="contact-phone">(021) 1234-5678</p>
        </div>
       </div>
       <div class="flex items-start space-x-4">
        <div id="contact-icon3" class="p-3 rounded-lg">
         <svg class="w-6 h-6" fill="white" viewbox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
         </svg>
        </div>
        <div>
         <h3 class="font-bold mb-1">Email</h3>
         <p id="contact-email">info@sekolah.sch.id</p>
        </div>
       </div>
      </div>
      <div id="contact-form-card" class="p-8 rounded-xl shadow-lg">
       <h3 class="text-2xl font-bold mb-6">Kirim Pesan</h3>
       <form id="contact-form" class="space-y-4">
        <div><label for="name" class="block font-medium mb-2">Nama</label> <input type="text" id="name" name="name" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
        </div>
        <div><label for="email" class="block font-medium mb-2">Email</label> <input type="email" id="email" name="email" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2">
        </div>
        <div><label for="message" class="block font-medium mb-2">Pesan</label> <textarea id="message" name="message" rows="4" required class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2"></textarea>
        </div><button type="submit" id="submit-btn" class="w-full py-3 rounded-lg font-semibold text-white transition-all">Kirim Pesan</button>
        <div id="form-message" class="hidden p-4 rounded-lg text-center font-medium"></div>
       </form>
      </div>
     </div>
    </div>
   </section><!-- Footer -->
   <footer id="footer" class="py-8 mt-auto">
    <div class="max-w-7xl mx-auto px-6 text-center">
     <p id="footer-text">© 2024 SD Negeri 1 Jakarta. Hak Cipta Dilindungi.</p>
    </div>
   </footer>
  </div>
  <script>
        const defaultConfig = {
            background_color: "#f0f9ff",
            surface_color: "#ffffff",
            text_color: "#1e293b",
            primary_action_color: "#0ea5e9",
            secondary_action_color: "#06b6d4",
            admin_username: "admin",
            admin_password: "admin123",
            school_name: "SD Negeri 1 Jakarta",
            school_motto: "Cerdas, Berkarakter, Berprestasi",
            hero_title: "Selamat Datang di",
            hero_subtitle: "Membentuk Generasi Cerdas dan Berkarakter",
            contact_address: "Jl. Pendidikan No. 123, Jakarta Selatan, DKI Jakarta 12345",
            contact_phone: "(021) 1234-5678",
            contact_email: "info@sekolah.sch.id",
            footer_text: "© 2024 SD Negeri 1 Jakarta. Hak Cipta Dilindungi.",
            font_family: "system-ui",
            font_size: 16
        };

        let allContent = [];
        let isLoggedIn = false;
        let editingContent = null;

        const dataHandler = {
            onDataChanged(data) {
                allContent = data.sort((a, b) => a.order - b.order);
                renderDynamicContent();
                if (document.getElementById('admin-modal').classList.contains('active')) {
                    renderAdminContentList();
                }
            }
        };

        async function onConfigChange(config) {
            const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
            const customFont = config.font_family || defaultConfig.font_family;
            const fontFamily = `${customFont}, ${baseFontStack}`;
            const baseSize = config.font_size || defaultConfig.font_size;

            document.body.style.fontFamily = fontFamily;

            const backgroundColor = config.background_color || defaultConfig.background_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
            const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

            document.body.style.backgroundColor = backgroundColor;
            document.body.style.color = textColor;

            document.getElementById('navbar').style.backgroundColor = surfaceColor;
            document.getElementById('navbar').style.color = textColor;

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.style.color = textColor;
                link.addEventListener('mouseenter', function() { this.style.color = primaryColor; });
                link.addEventListener('mouseleave', function() { this.style.color = textColor; });
            });

            document.getElementById('admin-login-btn').style.backgroundColor = primaryColor;
            document.getElementById('admin-login-btn').style.color = '#ffffff';

            document.querySelector('#home').style.backgroundColor = primaryColor;
            document.querySelector('#home').style.color = '#ffffff';

            document.getElementById('logo-bg').setAttribute('fill', primaryColor);
            document.getElementById('hero-icon-bg').setAttribute('fill', '#ffffff');
            document.getElementById('hero-icon-fg').setAttribute('fill', primaryColor);
            document.getElementById('hero-icon-fg2').setAttribute('fill', primaryColor);

            document.getElementById('cta-primary').style.backgroundColor = secondaryColor;
            document.getElementById('cta-secondary').style.backgroundColor = surfaceColor;
            document.getElementById('cta-secondary').style.color = primaryColor;
            document.getElementById('cta-secondary').style.border = `2px solid ${primaryColor}`;

            document.querySelector('#programs').style.backgroundColor = backgroundColor;
            document.querySelector('#programs').style.color = textColor;

            document.querySelector('#contact').style.backgroundColor = surfaceColor;
            document.querySelector('#contact').style.color = textColor;

            document.getElementById('contact-icon1').style.backgroundColor = primaryColor;
            document.getElementById('contact-icon2').style.backgroundColor = primaryColor;
            document.getElementById('contact-icon3').style.backgroundColor = primaryColor;

            document.getElementById('contact-form-card').style.backgroundColor = backgroundColor;
            document.getElementById('submit-btn').style.backgroundColor = primaryColor;

            document.getElementById('footer').style.backgroundColor = primaryColor;
            document.getElementById('footer').style.color = '#ffffff';

            document.getElementById('school-name').textContent = config.school_name || defaultConfig.school_name;
            document.getElementById('school-motto').textContent = config.school_motto || defaultConfig.school_motto;
            document.getElementById('hero-title').textContent = config.hero_title || defaultConfig.hero_title;
            document.getElementById('hero-school-name').textContent = config.school_name || defaultConfig.school_name;
            document.getElementById('hero-subtitle').textContent = config.hero_subtitle || defaultConfig.hero_subtitle;
            document.getElementById('contact-address').textContent = config.contact_address || defaultConfig.contact_address;
            document.getElementById('contact-phone').textContent = config.contact_phone || defaultConfig.contact_phone;
            document.getElementById('contact-email').textContent = config.contact_email || defaultConfig.contact_email;
            document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;

            document.getElementById('school-name').style.fontSize = `${baseSize * 1.25}px`;
            document.getElementById('hero-title').style.fontSize = `${baseSize * 2.5}px`;
            document.getElementById('hero-subtitle').style.fontSize = `${baseSize * 1.375}px`;
        }

        function renderDynamicContent() {
            const container = document.getElementById('dynamic-content');
            const emptyState = document.getElementById('empty-state');
            
            const visibleContent = allContent.filter(item => item.visible);
            
            if (visibleContent.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            container.innerHTML = '';
            
            visibleContent.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card-hover p-8 rounded-xl shadow-lg fade-in';
                card.style.backgroundColor = window.elementSdk?.config?.surface_color || defaultConfig.surface_color;
                
                const typeColors = {
                    program: '#0ea5e9',
                    info: '#06b6d4',
                    announcement: '#f59e0b',
                    achievement: '#10b981'
                };
                
                const typeLabels = {
                    program: 'Program',
                    info: 'Informasi',
                    announcement: 'Pengumuman',
                    achievement: 'Prestasi'
                };
                
                card.innerHTML = `
                    <div class="mb-4">
                        <span class="px-3 py-1 rounded-full text-xs font-bold text-white" style="background-color: ${typeColors[item.type]}">${typeLabels[item.type]}</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">${item.title}</h3>
                    <p class="leading-relaxed">${item.content}</p>
                `;
                
                container.appendChild(card);
            });
        }

        function renderAdminContentList() {
            const container = document.getElementById('content-list');
            
            if (allContent.length === 0) {
                container.innerHTML = '<div class="text-center py-8 text-gray-500">Belum ada konten. Klik "Tambah Konten Baru" untuk memulai.</div>';
                return;
            }
            
            container.innerHTML = '';
            
            allContent.forEach(item => {
                const card = document.createElement('div');
                card.className = 'border-2 rounded-lg p-4 flex justify-between items-start';
                
                const typeLabels = {
                    program: 'Program',
                    info: 'Informasi',
                    announcement: 'Pengumuman',
                    achievement: 'Prestasi'
                };
                
                card.innerHTML = `
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="px-2 py-1 rounded text-xs font-bold bg-blue-100 text-blue-800">${typeLabels[item.type]}</span>
                            <span class="text-xs text-gray-500">Urutan: ${item.order}</span>
                            ${!item.visible ? '<span class="px-2 py-1 rounded text-xs font-bold bg-gray-100 text-gray-600">Tersembunyi</span>' : ''}
                        </div>
                        <h4 class="font-bold text-lg mb-1">${item.title}</h4>
                        <p class="text-sm text-gray-600">${item.content.substring(0, 100)}${item.content.length > 100 ? '...' : ''}</p>
                    </div>
                    <div class="flex gap-2 ml-4">
                        <button class="edit-btn px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm" data-id="${item.__backendId}">Edit</button>
                        <button class="delete-btn px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm" data-id="${item.__backendId}">Hapus</button>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const content = allContent.find(c => c.__backendId === id);
                    if (content) {
                        openEditModal(content);
                    }
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', async function() {
                    const id = this.getAttribute('data-id');
                    const content = allContent.find(c => c.__backendId === id);
                    if (content) {
                        const confirmBtn = this;
                        if (confirmBtn.textContent === 'Hapus') {
                            confirmBtn.textContent = 'Yakin?';
                            confirmBtn.style.backgroundColor = '#dc2626';
                            setTimeout(() => {
                                confirmBtn.textContent = 'Hapus';
                                confirmBtn.style.backgroundColor = '#ef4444';
                            }, 3000);
                        } else {
                            confirmBtn.disabled = true;
                            confirmBtn.textContent = 'Menghapus...';
                            const result = await window.dataSdk.delete(content);
                            if (!result.isOk) {
                                const msg = document.createElement('div');
                                msg.className = 'fixed top-4 right-4 bg-red-100 border-2 border-red-500 text-red-700 px-6 py-3 rounded-lg shadow-lg z-50';
                                msg.textContent = 'Gagal menghapus konten. Silakan coba lagi.';
                                document.body.appendChild(msg);
                                setTimeout(() => msg.remove(), 3000);
                                confirmBtn.disabled = false;
                                confirmBtn.textContent = 'Hapus';
                            }
                        }
                    }
                });
            });
        }

        function openEditModal(content) {
            editingContent = content;
            document.getElementById('content-modal-title').textContent = 'Edit Konten';
            document.getElementById('edit-content-id').value = content.__backendId;
            document.getElementById('content-type').value = content.type;
            document.getElementById('content-title').value = content.title;
            document.getElementById('content-text').value = content.content;
            document.getElementById('content-order').value = content.order;
            document.getElementById('content-visible').checked = content.visible;
            document.getElementById('content-modal').classList.add('active');
        }

        document.getElementById('admin-login-btn').addEventListener('click', function() {
            if (isLoggedIn) {
                document.getElementById('admin-modal').classList.add('active');
                renderAdminContentList();
            } else {
                document.getElementById('login-modal').classList.add('active');
            }
        });

        document.getElementById('cancel-login').addEventListener('click', function() {
            document.getElementById('login-modal').classList.remove('active');
            document.getElementById('login-form').reset();
            document.getElementById('login-error').classList.add('hidden');
        });

        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const config = window.elementSdk?.config || defaultConfig;
            
            const correctUsername = config.admin_username || defaultConfig.admin_username;
            const correctPassword = config.admin_password || defaultConfig.admin_password;
            
            if (username === correctUsername && password === correctPassword) {
                isLoggedIn = true;
                document.getElementById('login-modal').classList.remove('active');
                document.getElementById('admin-modal').classList.add('active');
                document.getElementById('login-form').reset();
                document.getElementById('login-error').classList.add('hidden');
                document.getElementById('admin-login-btn').textContent = 'Dashboard';
                renderAdminContentList();
            } else {
                document.getElementById('login-error').textContent = 'Username atau password salah!';
                document.getElementById('login-error').classList.remove('hidden');
            }
        });

        document.getElementById('close-admin').addEventListener('click', function() {
            document.getElementById('admin-modal').classList.remove('active');
        });

        document.getElementById('add-content-btn').addEventListener('click', function() {
            editingContent = null;
            document.getElementById('content-modal-title').textContent = 'Tambah Konten Baru';
            document.getElementById('content-form').reset();
            document.getElementById('edit-content-id').value = '';
            document.getElementById('content-visible').checked = true;
            document.getElementById('content-modal').classList.add('active');
        });

        document.getElementById('close-content-modal').addEventListener('click', function() {
            document.getElementById('content-modal').classList.remove('active');
        });

        document.getElementById('cancel-content').addEventListener('click', function() {
            document.getElementById('content-modal').classList.remove('active');
        });

        document.getElementById('content-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (allContent.length >= 999 && !editingContent) {
                const msg = document.createElement('div');
                msg.className = 'fixed top-4 right-4 bg-red-100 border-2 border-red-500 text-red-700 px-6 py-3 rounded-lg shadow-lg z-50';
                msg.textContent = 'Maksimum 999 konten tercapai. Silakan hapus konten lama terlebih dahulu.';
                document.body.appendChild(msg);
                setTimeout(() => msg.remove(), 5000);
                return;
            }
            
            const saveBtn = document.getElementById('save-content-btn');
            const saveBtnText = document.getElementById('save-btn-text');
            saveBtn.disabled = true;
            saveBtnText.textContent = 'Menyimpan...';
            
            const contentData = {
                id: editingContent ? editingContent.id : 'content-' + Date.now(),
                type: document.getElementById('content-type').value,
                title: document.getElementById('content-title').value,
                content: document.getElementById('content-text').value,
                order: parseInt(document.getElementById('content-order').value),
                visible: document.getElementById('content-visible').checked,
                createdAt: editingContent ? editingContent.createdAt : new Date().toISOString()
            };
            
            let result;
            if (editingContent) {
                result = await window.dataSdk.update({ ...contentData, __backendId: editingContent.__backendId });
            } else {
                result = await window.dataSdk.create(contentData);
            }
            
            if (result.isOk) {
                document.getElementById('content-modal').classList.remove('active');
                document.getElementById('content-form').reset();
            } else {
                const msg = document.createElement('div');
                msg.className = 'fixed top-4 right-4 bg-red-100 border-2 border-red-500 text-red-700 px-6 py-3 rounded-lg shadow-lg z-50';
                msg.textContent = 'Gagal menyimpan konten. Silakan coba lagi.';
                document.body.appendChild(msg);
                setTimeout(() => msg.remove(), 3000);
            }
            
            saveBtn.disabled = false;
            saveBtnText.textContent = 'Simpan';
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submit-btn');
            const formMessage = document.getElementById('form-message');
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Mengirim...';
            
            setTimeout(() => {
                formMessage.textContent = 'Terima kasih! Pesan Anda telah berhasil dikirim.';
                formMessage.style.backgroundColor = '#dcfce7';
                formMessage.style.color = '#166534';
                formMessage.classList.remove('hidden');
                
                this.reset();
                submitBtn.disabled = false;
                submitBtn.textContent = 'Kirim Pesan';
                
                setTimeout(() => {
                    formMessage.classList.add('hidden');
                }, 5000);
            }, 1500);
        });

        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.surface_color || defaultConfig.surface_color,
                            set: (value) => {
                                config.surface_color = value;
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        },
                        {
                            get: () => config.primary_action_color || defaultConfig.primary_action_color,
                            set: (value) => {
                                config.primary_action_color = value;
                                window.elementSdk.setConfig({ primary_action_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                            set: (value) => {
                                config.secondary_action_color = value;
                                window.elementSdk.setConfig({ secondary_action_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || defaultConfig.font_family,
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: {
                        get: () => config.font_size || defaultConfig.font_size,
                        set: (value) => {
                            config.font_size = value;
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["admin_username", config.admin_username || defaultConfig.admin_username],
                    ["admin_password", config.admin_password || defaultConfig.admin_password],
                    ["school_name", config.school_name || defaultConfig.school_name],
                    ["school_motto", config.school_motto || defaultConfig.school_motto],
                    ["hero_title", config.hero_title || defaultConfig.hero_title],
                    ["hero_subtitle", config.hero_subtitle || defaultConfig.hero_subtitle],
                    ["contact_address", config.contact_address || defaultConfig.contact_address],
                    ["contact_phone", config.contact_phone || defaultConfig.contact_phone],
                    ["contact_email", config.contact_email || defaultConfig.contact_email],
                    ["footer_text", config.footer_text || defaultConfig.footer_text]
                ])
            });
        }

        (async function initDataSdk() {
            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error("Failed to initialize data SDK");
                }
            }
        })();

        onConfigChange(defaultConfig);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a06bdec4478e780',t:'MTc2MzQ2MTI5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
